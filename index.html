<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiplication Master</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100;200;300;400&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Lexend', sans-serif;
            background-color: #111827; /* Solid background color */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
        .btn-primary {
            background: rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }
        .fade-in {
            animation: fadeIn 1s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .progress-bar-inner {
            transition: width 0.5s ease-in-out;
        }
        .option-btn {
            transition: all 0.2s ease-in-out;
        }
        .option-btn.correct {
            background-color: rgba(74, 222, 128, 0.5) !important;
            border-color: rgba(74, 222, 128, 0.8) !important;
            transform: scale(1.05);
        }
        .option-btn.incorrect {
            background-color: rgba(248, 113, 113, 0.5) !important;
            border-color: rgba(248, 113, 113, 0.8) !important;
            animation: shake 0.5s;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    </style>
</head>
<body class="text-white min-h-screen flex items-center justify-center p-4">

    <!-- Welcome Screen -->
    <div id="welcomeScreen" class="text-center space-y-8 fade-in">
        <h1 class="text-5xl md:text-7xl font-thin tracking-wider">Multiplication Master</h1>
        <p class="text-lg md:text-xl font-light text-gray-300">Let's sharpen your mind. Pick a number to master.</p>
        <div class="glass-card rounded-2xl p-8 max-w-sm mx-auto">
            <label for="tableNumber" class="block text-left text-gray-200 font-light mb-2">Enter a number (1-24)</label>
            <input type="number" id="tableNumber" class="w-full bg-transparent border-b-2 border-gray-400 focus:border-white text-4xl text-center font-light outline-none pb-2 transition duration-300" placeholder="e.g., 7">
            <button id="startButton" class="w-full mt-8 py-4 rounded-xl btn-primary font-light text-xl tracking-widest">
                Start Learning
            </button>
            <p id="error-message" class="text-red-400 mt-4 h-4"></p>
        </div>
    </div>

    <!-- Choice Screen -->
    <div id="choiceScreen" class="hidden w-full max-w-md mx-auto fade-in text-center">
        <div class="glass-card rounded-2xl p-8">
            <h2 class="text-3xl md:text-4xl font-thin mb-8">The <span id="choiceTableNumber" class="font-normal"></span> Times Table</h2>
            <div class="space-y-4">
                <button id="studyButton" class="w-full btn-primary py-4 rounded-lg text-lg">Study Table & Tips</button>
                <button id="practiceButton" class="w-full btn-primary py-4 rounded-lg text-lg">Start Practice</button>
            </div>
            <button id="backButtonChoice" class="mt-8 text-gray-300 hover:text-white transition">&larr; Change Number</button>
        </div>
    </div>
    
    <!-- Study Screen -->
    <div id="studyScreen" class="hidden w-full max-w-3xl mx-auto fade-in">
        <div class="glass-card rounded-2xl p-6 md:p-10">
            <div class="flex justify-between items-center mb-8">
                 <h2 class="text-3xl md:text-4xl font-thin">Study: <span id="studyTableNumber" class="font-normal"></span> Times Table</h2>
                 <button id="backButtonStudy" class="text-gray-300 hover:text-white transition">&larr; Back</button>
            </div>
            <div class="flex flex-col items-center w-full space-y-8">
                <!-- Full Table Section -->
                <div class="w-full max-w-md">
                    <div id="fullTable" class="font-light text-gray-300 glass-card p-6 rounded-xl"></div>
                </div>
                <!-- Tips Section -->
                <div id="tipsSection" class="w-full max-w-md">
                    <h3 class="font-normal text-white text-2xl mb-4 text-center">Memorization Tips</h3>
                    <div id="tipsContent" class="font-light text-gray-300 text-center glass-card p-6 rounded-xl space-y-2"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Practice Screen -->
    <div id="practiceScreen" class="hidden w-full max-w-2xl mx-auto fade-in">
        <div class="glass-card rounded-2xl p-6 md:p-10">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl md:text-4xl font-thin">Practice: <span id="practiceTableNumber" class="font-normal"></span> Times Table</h2>
                <button id="backButtonPractice" class="text-gray-300 hover:text-white transition">&larr; Back</button>
            </div>
            <div class="mb-8">
                <p class="text-sm font-light text-gray-300 mb-2">Mastery Progress</p>
                <div class="w-full bg-gray-700/50 rounded-full h-2.5">
                    <div id="progressBar" class="bg-gradient-to-r from-gray-200 to-white h-2.5 rounded-full progress-bar-inner" style="width: 0%"></div>
                </div>
            </div>
            <div id="questionArea" class="text-center space-y-8 pt-6 border-t border-gray-700/50">
                <p class="text-5xl md:text-7xl font-light tracking-wide" id="questionText"></p>
                <div class="grid grid-cols-2 gap-4 pt-4">
                    <button class="option-btn glass-card p-4 rounded-lg text-2xl md:text-3xl font-light"></button>
                    <button class="option-btn glass-card p-4 rounded-lg text-2xl md:text-3xl font-light"></button>
                    <button class="option-btn glass-card p-4 rounded-lg text-2xl md:text-3xl font-light"></button>
                    <button class="option-btn glass-card p-4 rounded-lg text-2xl md:text-3xl font-light"></button>
                </div>
            </div>
            <div id="completionMessage" class="hidden text-center py-10">
                <h3 class="text-4xl font-thin mb-4">Table Mastered!</h3>
                <p class="text-gray-300 mb-6">Excellent work. You've mastered the <span id="completedTableNumber"></span> times table.</p>
                <button id="practiceAgainButton" class="btn-primary py-3 px-6 rounded-lg">Practice Again</button>
            </div>
        </div>
    </div>

    <!-- Techniques Screen -->
    <div id="techniquesScreen" class="hidden w-full max-w-3xl mx-auto fade-in">
        <div class="glass-card rounded-2xl p-6 md:p-10">
             <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl md:text-4xl font-thin">Advanced Multiplication</h2>
                <button id="backButtonTech" class="text-gray-300 hover:text-white transition">&larr; Go Back</button>
            </div>
            <div class="space-y-6 text-gray-200 font-light text-left">
                <p>Memorizing tables beyond 24 is less about rote memory and more about smart techniques. Here are some effective strategies:</p>
                <div>
                    <h3 class="font-normal text-white text-xl mb-2">1. The Commutative Property (Order Doesn't Matter)</h3>
                    <p>Remember that <span class="font-normal text-white">A x B</span> is the same as <span class="font-normal text-white">B x A</span>.</p>
                </div>
                <div>
                    <h3 class="font-normal text-white text-xl mb-2">2. Break It Down (Decomposition)</h3>
                    <p>Split a larger number into smaller, easier-to-manage parts. (e.g., 18 x 7 = (10 x 7) + (8 x 7) = 70 + 56 = 126).</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Screen Elements
        const welcomeScreen = document.getElementById('welcomeScreen');
        const choiceScreen = document.getElementById('choiceScreen');
        const studyScreen = document.getElementById('studyScreen');
        const practiceScreen = document.getElementById('practiceScreen');
        const techniquesScreen = document.getElementById('techniquesScreen');
        
        // Input & Error Elements
        const tableNumberInput = document.getElementById('tableNumber');
        const errorMessage = document.getElementById('error-message');

        // Buttons
        const startButton = document.getElementById('startButton');
        const studyButton = document.getElementById('studyButton');
        const practiceButton = document.getElementById('practiceButton');
        const backButtonChoice = document.getElementById('backButtonChoice');
        const backButtonStudy = document.getElementById('backButtonStudy');
        const backButtonPractice = document.getElementById('backButtonPractice');
        const backButtonTech = document.getElementById('backButtonTech');
        const practiceAgainButton = document.getElementById('practiceAgainButton');
        
        // Dynamic Content Elements
        const choiceTableNumber = document.getElementById('choiceTableNumber');
        const studyTableNumber = document.getElementById('studyTableNumber');
        const practiceTableNumber = document.getElementById('practiceTableNumber');
        const fullTable = document.getElementById('fullTable');
        const tipsSection = document.getElementById('tipsSection');
        const tipsContent = document.getElementById('tipsContent');
        const progressBar = document.getElementById('progressBar');
        const questionArea = document.getElementById('questionArea');
        const questionText = document.getElementById('questionText');
        const optionButtons = document.querySelectorAll('.option-btn');
        const completionMessage = document.getElementById('completionMessage');
        const completedTableNumber = document.getElementById('completedTableNumber');

        // State variables
        let currentTable = 0;
        let problems = [];
        let currentProblemIndex = 0;
        let correctAnswers = 0;

        const memorizationTips = {
            '2': 'Anything multiplied by 2 is just doubled. <br> (e.g., 2 x 7 is the same as 7 + 7).',
            '3': 'The digits of the answer add up to a multiple of 3. <br> (e.g., 3 x 8 = 24, and 2 + 4 = 6).',
            '4': 'Double, then double again. <br> (e.g., 4 x 6 is (2 x 6) x 2 = 24).',
            '5': 'The answer always ends in a 5 or a 0.',
            '6': 'If you multiply 6 by an even number, they both end in the same digit. <br> (e.g., 6 x 4 = 2<span class="text-white">4</span>).',
            '8': 'Double, double, and double again!',
            '9': 'The tens digit is one less than the number you\'re multiplying by. <br> (e.g., 9 x 7 = 63, and 6 is one less than 7).',
            '10': 'Just add a zero to the end of the number.',
            '11': 'Just repeat the digit you are multiplying by. <br> (e.g., 11 x 4 = 44).',
            '12': 'Think of it as (10 x number) + (2 x number).'
        };

        // --- Navigation Functions ---
        function showScreen(screenToShow) {
            [welcomeScreen, choiceScreen, studyScreen, practiceScreen, techniquesScreen].forEach(screen => {
                screen.classList.add('hidden');
            });
            screenToShow.classList.remove('hidden');
        }

        function showWelcomeScreen() {
            showScreen(welcomeScreen);
            tableNumberInput.value = '';
            errorMessage.textContent = '';
        }

        function showChoiceScreen(number) {
            currentTable = number;
            choiceTableNumber.textContent = number;
            showScreen(choiceScreen);
        }

        // --- Event Listeners ---
        startButton.addEventListener('click', () => {
            const number = parseInt(tableNumberInput.value);
            if (isNaN(number) || number < 1) {
                errorMessage.textContent = 'Please enter a valid number.';
                return;
            }
            if (number > 24) {
                showScreen(techniquesScreen);
            } else {
                showChoiceScreen(number);
            }
        });

        studyButton.addEventListener('click', () => {
            studyTableNumber.textContent = currentTable;
            displayFullTable(currentTable);
            displayTips(currentTable);
            showScreen(studyScreen);
        });

        practiceButton.addEventListener('click', () => {
            startPractice(currentTable);
        });
        
        // Back Buttons
        backButtonChoice.addEventListener('click', showWelcomeScreen);
        backButtonStudy.addEventListener('click', () => showChoiceScreen(currentTable));
        backButtonPractice.addEventListener('click', () => showChoiceScreen(currentTable));
        backButtonTech.addEventListener('click', showWelcomeScreen);

        // --- Study Mode Functions ---
        function displayFullTable(number) {
            fullTable.innerHTML = ''; // Clear previous content
            const tableGrid = document.createElement('div');
            tableGrid.className = 'grid grid-cols-1 text-xl gap-2'; // A single column grid for a clean list look
            for (let i = 1; i <= 12; i++) {
                const row = document.createElement('div');
                row.className = 'flex justify-center items-center space-x-4 p-2 rounded-lg transition-colors duration-200 hover:bg-white/10';
                row.innerHTML = `
                    <span class="text-gray-400 w-8 text-right">${number}</span>
                    <span class="text-gray-500">x</span>
                    <span class="text-gray-400 w-8 text-left">${i}</span>
                    <span class="text-gray-500">=</span>
                    <span class="text-white font-normal w-12 text-left">${number * i}</span>
                `;
                tableGrid.appendChild(row);
            }
            fullTable.appendChild(tableGrid);
        }

        function displayTips(number) {
            if (memorizationTips[number]) {
                tipsContent.innerHTML = memorizationTips[number];
                tipsSection.style.display = 'block';
            } else {
                tipsContent.innerHTML = 'No specific tricks for this number, but breaking it down is always a great strategy!';
            }
        }

        // --- Practice Mode Functions ---
        function startPractice(number) {
            practiceTableNumber.textContent = number;
            correctAnswers = 0;
            problems = generateProblems(number);
            currentProblemIndex = 0;
            updateProgress();
            
            questionArea.classList.remove('hidden');
            completionMessage.classList.add('hidden');
            showScreen(practiceScreen);
            
            displayProblem();
        }
        
        practiceAgainButton.addEventListener('click', () => startPractice(currentTable));

        function generateProblems(number) {
            const problemSet = [];
            for (let i = 1; i <= 12; i++) {
                problemSet.push({ question: `${number} x ${i}`, answer: number * i });
            }
            return problemSet.sort(() => Math.random() - 0.5);
        }

        function generateOptions(correctAnswer) {
            const options = new Set([correctAnswer]);
            const nearbyMultiples = [correctAnswer - currentTable, correctAnswer + currentTable];
            for(const m of nearbyMultiples) {
                if(m > 0) options.add(m);
            }
            while (options.size < 4) {
                const randomOffset = Math.floor(Math.random() * 10) - 5;
                const randomAnswer = correctAnswer + randomOffset;
                if (randomAnswer > 0 && randomAnswer !== correctAnswer) {
                    options.add(randomAnswer);
                }
            }
            return Array.from(options).sort(() => Math.random() - 0.5);
        }

        function displayProblem() {
            if (currentProblemIndex >= problems.length) {
                showCompletion();
                return;
            }
            const problem = problems[currentProblemIndex];
            questionText.textContent = problem.question;
            const options = generateOptions(problem.answer);
            optionButtons.forEach((button, index) => {
                button.textContent = options[index];
                button.onclick = () => checkAnswer(options[index], problem.answer, button);
                button.className = 'option-btn glass-card p-4 rounded-lg text-2xl md:text-3xl font-light';
            });
        }

        function checkAnswer(selected, correct, button) {
            optionButtons.forEach(btn => btn.disabled = true);
            if (selected === correct) {
                button.classList.add('correct');
                correctAnswers++;
                setTimeout(() => {
                    currentProblemIndex++;
                    updateProgress();
                    displayProblem();
                }, 1000);
            } else {
                button.classList.add('incorrect');
                optionButtons.forEach(btn => {
                    if (parseInt(btn.textContent) === correct) btn.classList.add('correct');
                });
                problems.push(problems[currentProblemIndex]); // Re-add to the end
                setTimeout(() => {
                    currentProblemIndex++;
                    displayProblem();
                }, 2000);
            }
            setTimeout(() => {
                optionButtons.forEach(btn => btn.disabled = false);
            }, 2000);
        }

        function updateProgress() {
            const progress = (correctAnswers / 12) * 100;
            progressBar.style.width = `${Math.min(progress, 100)}%`;
        }
        
        function showCompletion() {
            questionArea.classList.add('hidden');
            completionMessage.classList.remove('hidden');
            completedTableNumber.textContent = currentTable;
        }
        
        tableNumberInput.addEventListener('keyup', (event) => {
            if (event.key === 'Enter') startButton.click();
        });

    </script>
</body>
</html>
